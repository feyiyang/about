---
title: "å­¦ä¹ ruståŸºç¡€"
description: "äº†è§£ç¼–ç¨‹è¯­è¨€ä¸­çš„å¸¸è§æ¦‚å¿µï¼Œå¹¶äº†è§£å®ƒä»¬æ˜¯å¦‚ä½•åœ¨ Rust ä¸­å®ç°çš„ã€‚ è¿™äº›æ¦‚å¿µä¸æ˜¯ Rust ç‹¬æœ‰çš„ï¼Œä½†å®ƒä»¬ä¸ºæ¯ä¸ª Rust ç¨‹åºæä¾›äº†åŸºç¡€ã€‚"
pubDate: "2023/05/05"
heroImage: ""
tag:
  - Rust
---

import SideNave from '../../components/SideNav.vue';

<SideNave>  

{/*
<!-- vscode-markdown-toc -->
*/}
- [åŸºæœ¬ç¨‹åºç»“æ„](#åŸºæœ¬ç¨‹åºç»“æ„)
  - [Rustå‡½æ•°](#rustå‡½æ•°)
  - [ä»£ç ç¼©è¿›](#ä»£ç ç¼©è¿›)
  - [todo!å®(macro)](#todoå®macro)
  - [println!å®](#printlnå®)
  - [{}å‚æ•°çš„å€¼æ›¿æ¢](#å‚æ•°çš„å€¼æ›¿æ¢)
- [Rustä¸­åˆ›å»ºå’Œä½¿ç”¨å˜é‡](#rustä¸­åˆ›å»ºå’Œä½¿ç”¨å˜é‡)
  - [å˜é‡](#å˜é‡)
  - [ä¸å¯å˜ä¸å¯å˜](#ä¸å¯å˜ä¸å¯å˜)
  - [å˜é‡éšè—](#å˜é‡éšè—)
  - [æ¢ç´¢æ•°å­—ã€æ–‡æœ¬å’Œ true/false å€¼çš„æ•°æ®ç±»å‹](#æ¢ç´¢æ•°å­—æ–‡æœ¬å’Œ-truefalse-å€¼çš„æ•°æ®ç±»å‹)
  - [å†…ç½®æ•°æ®ç±»å‹](#å†…ç½®æ•°æ®ç±»å‹)
    - [æ•°å­—ï¼šæ•´æ•°å’Œæµ®ç‚¹æ•°](#æ•°å­—æ•´æ•°å’Œæµ®ç‚¹æ•°)
  - [å¸ƒå°”å€¼: True æˆ– false](#å¸ƒå°”å€¼-true-æˆ–-false)
  - [æ–‡æœ¬ï¼šå­—ç¬¦æˆ–å­—ç¬¦ä¸²](#æ–‡æœ¬å­—ç¬¦æˆ–å­—ç¬¦ä¸²)
- [å…ƒç»„å’Œç»“æ„å®šä¹‰æ•°æ®é›†åˆ](#å…ƒç»„å’Œç»“æ„å®šä¹‰æ•°æ®é›†åˆ)
  - [å…ƒç»„](#å…ƒç»„)
  - [ç»“æ„](#ç»“æ„)
  - [å­—ç¬¦ä¸²æ–‡æœ¬è½¬ä¸ºStringç±»å‹](#å­—ç¬¦ä¸²æ–‡æœ¬è½¬ä¸ºstringç±»å‹)
- [ä¸ºå¤åˆæ•°æ®ä½¿ç”¨æšä¸¾å˜é‡](#ä¸ºå¤åˆæ•°æ®ä½¿ç”¨æšä¸¾å˜é‡)
  - [å®ä¾‹åŒ–æšä¸¾](#å®ä¾‹åŒ–æšä¸¾)
- [Rustä¸­ä½¿ç”¨å‡½æ•°](#rustä¸­ä½¿ç”¨å‡½æ•°)
  - [è¿”å›å€¼](#è¿”å›å€¼)
  - [æŸ¥çœ‹ç­¾å](#æŸ¥çœ‹ç­¾å)
- [ä½¿ç”¨ Rust ä¸­çš„ if/else è¡¨è¾¾å¼æµ‹è¯•æ¡ä»¶](#ä½¿ç”¨-rust-ä¸­çš„-ifelse-è¡¨è¾¾å¼æµ‹è¯•æ¡ä»¶)
  - [åˆ›å»ºå’Œä½¿ç”¨æ•°ç»„](#åˆ›å»ºå’Œä½¿ç”¨æ•°ç»„)
  - [æµè§ˆçŸ¢é‡æ•°æ®ç±»å‹](#æµè§ˆçŸ¢é‡æ•°æ®ç±»å‹)
- [ä½¿ç”¨ if/esle æ¡ä»¶](#ä½¿ç”¨-ifesle-æ¡ä»¶)
- [ä½¿ç”¨å“ˆå¸Œæ˜ å°„](#ä½¿ç”¨å“ˆå¸Œæ˜ å°„)
  - [è·å–é”®å€¼](#è·å–é”®å€¼)
  - [åˆ é™¤é”®å€¼å¯¹](#åˆ é™¤é”®å€¼å¯¹)
- [ä½¿ç”¨ forã€whileã€å’Œ loop è¡¨è¾¾å¼](#ä½¿ç”¨-forwhileå’Œ-loop-è¡¨è¾¾å¼)
  - [å¾ªç¯whileè¯­å¥](#å¾ªç¯whileè¯­å¥)
- [åœ¨Rustä¸­å¤„ç†é”™è¯¯](#åœ¨rustä¸­å¤„ç†é”™è¯¯)
  - [ä¼´éšç€ panic çš„ä¸¥é‡é”™è¯¯ï¼](#ä¼´éšç€-panic-çš„ä¸¥é‡é”™è¯¯)
  - [ä½¿ç”¨Optionç±»å‹å¤„ç†ç¼ºå¤±](#ä½¿ç”¨optionç±»å‹å¤„ç†ç¼ºå¤±)
  - [æ¨¡å¼åŒ¹é…](#æ¨¡å¼åŒ¹é…)
  - [if let è¡¨è¾¾å¼](#if-let-è¡¨è¾¾å¼)
  - [ä½¿ç”¨`unwrap`å’Œ`expect`](#ä½¿ç”¨unwrapå’Œexpect)
  - [ä½¿ç”¨ Result ç±»å‹å¤„ç†é”™è¯¯](#ä½¿ç”¨-result-ç±»å‹å¤„ç†é”™è¯¯)
- [Rustå¦‚ä½•ç®¡ç†å†…å­˜](#rustå¦‚ä½•ç®¡ç†å†…å­˜)
  - [ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ](#ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ)
  - [äº†è§£å€Ÿç”¨](#äº†è§£å€Ÿç”¨)
  - [ä½¿ç”¨ç”Ÿå­˜æœŸéªŒè¯å¼•ç”¨](#ä½¿ç”¨ç”Ÿå­˜æœŸéªŒè¯å¼•ç”¨)
  - [æ³›å‹æ•°æ®ç±»å‹](#æ³›å‹æ•°æ®ç±»å‹)
  - [ä½¿ç”¨ç‰¹å¾å®šä¹‰å…±äº«è¡Œä¸º](#ä½¿ç”¨ç‰¹å¾å®šä¹‰å…±äº«è¡Œä¸º)
  - [ä½¿ç”¨æ´¾ç”Ÿç‰¹å¾](#ä½¿ç”¨æ´¾ç”Ÿç‰¹å¾)
  - [ä½¿ç”¨ç‰¹å¾è¾¹ç•Œå’Œæ³›å‹å‡½æ•°](#ä½¿ç”¨ç‰¹å¾è¾¹ç•Œå’Œæ³›å‹å‡½æ•°)
  - [ä½¿ç”¨è¿­ä»£å™¨](#ä½¿ç”¨è¿­ä»£å™¨)
- [æ¢ç´¢æ¨¡å—ã€åŒ…å’Œç¬¬ä¸‰æ–¹ç®±](#æ¢ç´¢æ¨¡å—åŒ…å’Œç¬¬ä¸‰æ–¹ç®±)
  - [ç†è§£ä»£ç ç»„ç»‡èƒŒåçš„æ¦‚å¿µ](#ç†è§£ä»£ç ç»„ç»‡èƒŒåçš„æ¦‚å¿µ)
  - [å‘é¡¹ç›®ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹ç®±](#å‘é¡¹ç›®ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹ç®±)

{/*
<!-- vscode-markdown-toc-config
	numbering=false
	autoSave=true
	/vscode-markdown-toc-config -->
<!-- /vscode-markdown-toc -->
*/}
</SideNave>

<a href="https://learn.microsoft.com/zh-cn/training/modules/rust-modules-packages-crates/" target="_blank">_microsoftç¯‡_</a>
### <a name='-1'></a>åŸºæœ¬ç¨‹åºç»“æ„
#### <a name='Rust'></a>Rustå‡½æ•°
æ¯ä¸ªrustç¨‹åºå¿…é¡»æœ‰åä¸º`main`çš„å‡½æ•°
```
fn main() {
  printIn!("Hello, world");
}
```

#### <a name='-1'></a>ä»£ç ç¼©è¿›
å¤§å¤šè¯­å¥ä»¥`;`ç»“å°¾ã€‚ç¼©è¿›å››ä¸ªç©ºæ ¼ã€‚  

#### <a name='todomacro'></a>todo!å®(macro)
Rustä¸­çš„å®ç±»ä¼¼äºé‡‡ç”¨å¯å˜æ•°é‡çš„è¾“å…¥å‚æ•°çš„å‡½æ•°ã€‚  
```
fn main() {
  todo!("Display the message by using the println!() macro");
}
```

#### <a name='println'></a>println!å®
`println!`å®éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å…¥å‚æ•°ï¼Œè¿™äº›å‚æ•°ä¼šæ˜¾ç¤ºåœ¨å±å¹•æˆ–æ ‡å‡†è¾“å‡ºä¸­ã€‚
```
fn main() {
  // println! displays the input 'Hello, world' to the screen
  println!("Hello, world!");
}
```

#### <a name='-1'></a>{}å‚æ•°çš„å€¼æ›¿æ¢
```
fn main() {
  println!("The first letter of the English alphabet is {} and the last letter is {}.", 'A', 'Z');
}
```

### <a name='Rust-1'></a>Rustä¸­åˆ›å»ºå’Œä½¿ç”¨å˜é‡ 
#### <a name='-1'></a>å˜é‡
å£°æ˜å˜é‡åï¼Œå¯å°†å…¶ç»‘å®šåˆ°æŸä¸ªå€¼ï¼Œä¹Ÿå¯ç¨ååœ¨ç¨‹åºä¸­ç»‘å®šè¯¥å€¼ã€‚
```
let a_number = 10;
```
å¦‚æœå°è¯•åœ¨ç»‘å®š`a_number`ä¹‹å‰æ˜¾ç¤ºè¯¥å˜é‡å€¼ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šè¿”å›é”™è¯¯ã€‚  

#### <a name='-1'></a>ä¸å¯å˜ä¸å¯å˜
å˜é‡ç»‘å®šé»˜è®¤ä¸å¯å˜ã€‚ æ›´æ”¹å€¼å¿…é¡»å…ˆä½¿ç”¨`mut`å…³é”®å­—å°†å˜é‡ç»‘å®šä¸ºå¯å˜ã€‚  
```
let mut a_number = 10;
println!("The number is {}.", a_number);

a_number = 15;
println!("Now the number is {}.", a_number);
```

#### <a name='-1'></a>å˜é‡éšè—
æ–°çš„å£°æ˜ä¼šåˆ›å»ºæ–°çš„ç»‘å®šã€‚åœ¨Rustä¸­ï¼Œæ­¤æ“ä½œç§°ä¸º"éšè—"ï¼Œæ—§å˜é‡ä»åœ¨ï¼Œä½†æ— æ³•å†äºæ­¤èŒƒå›´å†…å¼•ç”¨å®ƒã€‚  

#### <a name='truefalse'></a>æ¢ç´¢æ•°å­—ã€æ–‡æœ¬å’Œ true/false å€¼çš„æ•°æ®ç±»å‹
Rustæ˜¯ä¸€ç§é™æ€ç±»å‹åŒ–çš„è¯­è¨€ã€‚ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ ¹æ®ç»‘å®šå€¼æ¨æ–­å˜é‡æ•°æ®ç±»å‹ã€‚å¤šç§ç±»å‹å¿…é¡»é€šè¿‡ä½¿ç”¨ç±»å‹æ³¨é‡Šè®©ç¼–è¯‘å™¨å¾—çŸ¥ç‰¹å®šç±»å‹ã€‚  
```
let number: u32 = "14"
// ç¼–è¯‘å™¨ä¼šå‘ç”Ÿé”™è¯¯
```

#### <a name='-1'></a>å†…ç½®æ•°æ®ç±»å‹
- æ•´æ•°æ•°å­—
- æµ®ç‚¹æ•°
- å¸ƒå°”å‹
- å­—ç¬¦

##### æ•°å­—ï¼šæ•´æ•°å’Œæµ®ç‚¹æ•°

| é•¿åº¦ | æœ‰ç¬¦å· | æ— ç¬¦å· |
| :- | :- | :- |
| 8ä½ | i8 | u8 |
| ä¸ä½“ç³»ç»“æ„ç›¸å…³ | isize | usize |

`isize` `uszie` ç±»å‹å–å†³äºè¿è¡Œç¨‹åºçš„è®¡ç®—æœºç±»å‹ã€‚ 64ä½ç³»ç»Ÿä½¿ç”¨64ä½ç±»å‹ã€‚ é»˜è®¤æµ®ç‚¹æ•°`f64`ã€‚   

#### <a name=':Truefalse'></a>å¸ƒå°”å€¼: True æˆ– false
`bool` ç±»å‹æœ‰ä¸¤ä¸ªå¯èƒ½å€¼: `true`æˆ–`false`ã€‚  

#### <a name='-1'></a>æ–‡æœ¬ï¼šå­—ç¬¦æˆ–å­—ç¬¦ä¸²
å­—ç¬¦ `char`ç±»å‹æ˜¯æœ€åŸºå…ƒçš„æ–‡æœ¬ç±»å‹ã€‚
```
let uppercase_s = 'S';
let lowercase_f = 'f';
let smiley_face = 'ğŸ˜€';
```
å­—ç¬¦ä¸² `str` ç±»å‹ä¹Ÿç§°ä¸º"å­—ç¬¦ä¸²åˆ‡ç‰‡",å®ƒæ˜¯å­—ç¬¦ä¸²æ•°æ®çš„ä¸€ç§è§†å›¾ã€‚å­—ç¬¦ä¸²å­—é¢é‡çš„ç±»å‹éƒ½æ˜¯`&str`ã€‚  
å¯¹äºå­—ç¬¦ä¸²æœªçŸ¥ å¦‚ç”¨æˆ·è¾“å…¥ç­‰åœºæ™¯ï¼ŒRustå…·æœ‰å¦ä¸€ä¸ªåä¸º`String`çš„å­—ç¬¦ä¸²ç±»å‹ã€‚æ­¤ç±»å‹åœ¨å †ä¸Šåˆ†é…ã€‚  
``` 
// ä½¿ç”¨: char æ³¨é‡Šè¯­æ³•å£°æ˜å­—ç¬¦å˜é‡
let character_1: char = 'S';
let character_2: char = 'f';

// é€šè¿‡ç¼–è¯‘å™¨æ¨æ–­æ•°æ®ç±»å‹
let smiley_face = 'ğŸ˜€';

//
let string_1 = "miley ";

let string_2: &str = "ace";
```

### <a name='-1'></a>å…ƒç»„å’Œç»“æ„å®šä¹‰æ•°æ®é›†åˆ
#### <a name='-1'></a>å…ƒç»„
```
let tuple_e = ('E', 5i32, true);

println!("Is '{}' the {}th letter of the alphabet? {}", tuple_e.0, tuple_e.1, tuple_e.2);
```

#### <a name='-1'></a>ç»“æ„
Rustæ”¯æŒä¸‰ç§ç»“æ„ç±»å‹: ç»å…¸ç»“æ„ã€å…ƒç»„ç»“æ„å’Œå•å…ƒç»“æ„ã€‚
```
// ç»å…¸ Cç»“æ„ æœ€å¸¸ç”¨
struct Student { name: String, level: u8, remote: bool }

// å…ƒç»„
struct Grades(char, char, char, char, f32);

// å•å…ƒç»“æ„æœ€å¸¸ç”¨ä½œæ ‡è®°ã€‚ 
struct Unit;
```
å®ä¾‹åŒ–ç»“æ„
```
let user_1 = Student { name: String::from("Constance Sharma"), remote: true, level: 2 };
let user_2 = Student { name: String::from("Dyson Tan"), level: 5, remote: false };

let mark_1 = Grades('A', 'A', 'B', 'A', 3.75);
let mark_2 = Grades('B', 'A', 'A', 'C', 3.25);

println!("{}, level {}. Remote: {}. Grades: {}, {}, {}, {}. Average: {}", user_1.name, user_1.level, user_1.remote, mark_1.0, mark_1.1, mark_1.2, mark_1.3, mark_1.4);
```
#### <a name='String'></a>å­—ç¬¦ä¸²æ–‡æœ¬è½¬ä¸ºStringç±»å‹
ç¼–è¯‘å™¨å»ºè®®ä½¿ç”¨`.to_string()`å‡½æ•°è¿›è¡Œè½¬æ¢ã€‚  

### <a name='-1'></a>ä¸ºå¤åˆæ•°æ®ä½¿ç”¨æšä¸¾å˜é‡
Rustä¸­æåŠçš„æšä¸¾é€šå¸¸ç§°ä¸ºä»£æ•°æ•°æ®ç±»å‹ã€‚  
```
enum WebEvent {
  // æ²¡æœ‰å…³è”çš„æ•°æ®ç±»å‹æˆ–æ•°æ®
  WELoad,
  // å…·æœ‰ä¸¤ä¸ªæ•°æ®ç±»å‹åˆ†åˆ«ä¸ºStringå’Œcharçš„å­—æ®µ
  WEKeys(String, char),
  // åŒ…å«å‘½åå­—æ®µä¸ºxå’Œyä»¥åŠå­—æ®µçš„æ•°æ®ç±»å‹ä¸º i64 çš„åŒ¿åç»“æ„ã€‚ 
  WEClick { x: i64, y: i64 }
}
```
#### <a name='-1'></a>å®ä¾‹åŒ–æšä¸¾
```
struct KeyPress(String, char);
struct MouseClick { x: i64, y: i64 };

enum WebEvent { WELoad(bool), WEClick(MouseClick), WEKeys(KeyPress) };

// ç®€å•å˜ä½“
let we_load = WebEvent::WELoad(true);

// ç»“æ„å˜ä½“
let click = MouseClick { x: 100, y: 250 };
let we_click = WebEvent::WEClick(click);

// å…ƒç»„å˜é‡
let keys = KeyPress(String::from("Ctrl+"), 'N');
let we_key = WebEvent::WEKeys(keys);

```

é€šè¿‡ `#[derive(Debug)]` è¯­æ³•å¯ä»¥åœ¨ä»£ç æ‰§è¡ŒæœŸé—´æŸ¥çœ‹æŸäº›åœ¨æ ‡å‡†è¾“å‡ºä¸­æ— æ³•æŸ¥çœ‹çš„å€¼ã€‚  

### <a name='Rust-1'></a>Rustä¸­ä½¿ç”¨å‡½æ•°
Rustä¸­å‡½æ•°å®šä¹‰ä»¥`fn`å…³é”®å­—å¼€å¤´ã€‚
```
fn main() {
  println!("Hello, world");

  let formal = "Formal: Goodbye.";
  let casual = "Casual: See you later!";
  goodbye(formal);
  goodbye(casual);
}

fn goodbye(message: &str) {
  println!("\n{}", message);
}
```
#### <a name='-1'></a>è¿”å›å€¼
`-> <type>`ã€‚
```
fn divide_by_5(num: u32) -> u32 {
  if num == 0 {
    // æ˜¾å¼ä½¿ç”¨ return å…³é”®å­—æå‰ä»å‡½æ•°è¿”å›
    return 0;
  }
  num / 5
}
```
#### <a name='-1'></a>æŸ¥çœ‹ç­¾å
å‡½æ•°å£°æ˜çš„ç¬¬ä¸€éƒ¨åˆ†ç§°ä¸ºå‡½æ•°ç­¾åã€‚  


### <a name='Rustifelse'></a>ä½¿ç”¨ Rust ä¸­çš„ if/else è¡¨è¾¾å¼æµ‹è¯•æ¡ä»¶
#### <a name='-1'></a>åˆ›å»ºå’Œä½¿ç”¨æ•°ç»„
```
// æœªæŒ‡å®šé•¿åº¦çš„é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨
let days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

// åˆå§‹å€¼åè·Ÿä¸€ä¸ªåˆ†å·ï¼Œç„¶åæ˜¯æ•°ç»„é•¿åº¦
let bytes = [0; 5];
```
ç¼–è¯‘æ—¶ï¼Œæ•°ç»„ç­¾å`[T; size]`.  
- æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½å…·æœ‰ç›¸åŒçš„æ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹æ°¸è¿œä¸ä¼šæ›´æ”¹ã€‚
- æ•°ç»„å¤§å°æ˜¯å›ºå®šçš„ï¼Œé•¿åº¦æ°¸è¿œä¸ä¼šæ›´æ”¹ã€‚ 

å¦‚æœå°è¯•ä½¿ç”¨ä¸åœ¨å…è®¸èŒƒå›´å†…çš„ç´¢å¼•è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œç¼–è¯‘å™¨å°†è¿”å›é”™è¯¯ã€‚  

#### <a name='-1'></a>æµè§ˆçŸ¢é‡æ•°æ®ç±»å‹
çŸ¢é‡å­˜å‚¨æ•°æ®ç±»å‹ç›¸åŒçš„å¤šä¸ªå€¼ï¼Œå‘é‡çš„å¤§å°æˆ–é•¿åº¦å¯ä»¥éšæ—¶å¢å¤§æˆ–å‡å°ã€‚   
å£°æ˜å’Œåˆå§‹åŒ–å‘é‡çš„å¸¸ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨`vec!`å®ã€‚  
```
let three_nums = vec![15, 3, 46];
println!("Initial vector: {:?}", three_nums);

let zeroes = vec![0; 5];
println!("Zeroes: {:?}", zeroes);

// åœ¨å‘é‡æœ«å°¾æ·»åŠ å’Œåˆ é™¤å€¼ã€‚
let mut fruit = Vec::new();

fruit.push("Apple");
fruit.push("Banana");
fruit.push("Cherry");

println!("Pop off: {:?}", fruit.pop());
```
### <a name='ifesle'></a>ä½¿ç”¨ if/esle æ¡ä»¶
Rustä¸­çš„`if`å—ä¹Ÿå¯å……å½“è¡¨è¾¾å¼ã€‚
```
let formal = true;
let greeting = if formal {
  "Good day to you."
} else {
  "Hey!"
};
println!("{}", greeting)
```

### <a name='-1'></a>ä½¿ç”¨å“ˆå¸Œæ˜ å°„
`HashMap<K, V>`ç±»å‹é€šè¿‡æ˜ å°„æ¯ä¸ªé”®`K`åŠå…¶å€¼`V`æ¥å­˜å‚¨æ•°æ®ã€‚  
```
use std::collections::HashMap;
let mut reviews: HashMap<String, String> = HashMap::new();

reviews.insert(String::from("Ancient Roman History"), String::from("Very accurate."));
reviews.insert(String::from("Programming in Rust"), String::from("Great examples."));
```
`use` ç±»ä¼¼äºå…¶ä»–ç¼–ç¨‹è¯­è¨€æ‰€è¿°çš„å¯¼å…¥ã€‚  
#### <a name='-1'></a>è·å–é”®å€¼
```
let book: &str = "Programming in Rust";
println!("\nReview for \'{}\': {:?}", book, reviews.get(book));
// Review for 'Programming in Rust': Some("Great examples.")
// ç”±äº get æ–¹æ³•è¿”å› Option<&Value> ç±»å‹ï¼Œå› æ­¤ Rust ä½¿ç”¨"Some()"è¡¨ç¤ºæ³•åŒ…è£…æ–¹æ³•è°ƒç”¨çš„ç»“æœã€‚
```
#### <a name='-1'></a>åˆ é™¤é”®å€¼å¯¹
```
let obsolete: &str = "Ancient Roman History";
reviews.remove(obsolete);

println!("{:?}", reviews.get(obsolete));
// None
```
### <a name='forwhileloop'></a>ä½¿ç”¨ forã€whileã€å’Œ loop è¡¨è¾¾å¼
Rust æä¾›ä¸‰ç§å¾ªç¯ï¼š
- `loop`: åœ¨å‘ç”Ÿæ‰‹åŠ¨åœæ­¢å‰é‡å¤ä»£ç 
- `while`: åœ¨æ¡ä»¶ä¸€ç›´ä¸ºtrueæ—¶é‡å¤ä»£ç 
- `for`: å¯¹é›†åˆä¸­çš„æ‰€æœ‰å€¼é‡å¤ä»£ç 

`loop` å¯æ·»åŠ ç‰¹å®šä»£ç åœæ­¢ï¼Œä¹Ÿå¯è¾“å…¥Ctrl+Cç­‰é”®ç›˜æŒ‡ä»¤åœæ­¢ã€‚  
```
let mut counter = 1;

let stop_loop = loop {
  counter *= 2;
  if counter > 100 {
    break counter;
  }
};
// break when counter = 128
println!("counter = {}.", stop_loop)
```
æ–­ç‚¹è¿”å›ç›¸åŒç±»å‹çš„å€¼ã€‚å€¼ç±»å‹éƒ½å¿…é¡»ä¸ºæ•´æ•°ã€å­—ç¬¦ä¸²æˆ–å¸ƒå°”ç­‰ã€‚æœªæ˜¾ç¤ºè¿”å›ç¨‹åºå°†è¡¨è¾¾å¼ç»“æœè§£é‡Šä¸ºç©ºå…ƒç»„`()`ã€‚  
#### <a name='while'></a>å¾ªç¯whileè¯­å¥
```
while counter < 5 {
  println!("We loop a while...");
  counter = counter + 1;
}
```
`for` å¾ªç¯ä½¿ç”¨ä¸´æ—¶å˜é‡ä½œä¸ºè¿­ä»£å™¨ã€‚è¯¥å˜é‡åœ¨å¾ªç¯è¡¨è¾¾å¼çš„å¼€å§‹ä½ç½®éšå¼å£°æ˜ï¼Œå¹¶ä¸”æ¯æ¬¡è¿­ä»£éƒ½ä¼šè®¾ç½®å½“å‰å€¼ã€‚  
```
let big_birds = ["ostrich", "peacock", "stork"];
for bird in big_birds.iter() {
  println!("{}", bird);
}

// èŒƒå›´è¡¨è¾¾å¼ a..b
for number in 0..5 {
  println!("{}", number * 2);
}
```

### <a name='Rust-1'></a>åœ¨Rustä¸­å¤„ç†é”™è¯¯
#### <a name='panic'></a>ä¼´éšç€ panic çš„ä¸¥é‡é”™è¯¯ï¼
`panic!`å®å°†è¾“å‡ºä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€æ¸…ç†èµ„æºã€ç„¶åé€€å‡ºç¨‹åºã€‚  
```
let v = vec![0, 1, 2, 3];
println!("{}", v[6]);// this will cause a panic!
```
#### <a name='Option'></a>ä½¿ç”¨Optionç±»å‹å¤„ç†ç¼ºå¤±
`Option<T>`åœ¨Rustä»£ç ä¸­çš„ä½¿ç”¨éå¸¸å¹¿æ³›ã€‚å®ƒå¯ç”¨äºå¤„ç†å¯èƒ½å­˜åœ¨æˆ–å¯èƒ½ä¸ºç©ºçš„å€¼ã€‚å¦‚æœè¦åœ¨Rustä¸­å¯¹å¯é€‰å­—ç¬¦ä¸²å»ºæ¨¡ï¼Œåˆ™éœ€è¦å°†å…¶æ˜¾ç¤ºåŒ…è£…åœ¨`Option`ç±»å‹ä¸­:`Option<String>`ã€‚
```
enum Option<T> {
  None,   // The value doesn't exist
  Some(T) // The value exists
}

let fruits = vec!["banana", "apple", "cocount", "orange", "strawberry"];

let non_existent = fruits.get(99);
println!("{:?}", non_existent);
// None
```
#### <a name='-1'></a>æ¨¡å¼åŒ¹é…
å¯åˆ©ç”¨`match`è¿ç®—ç¬¦ï¼Œé€šè¿‡æä¾›æ¨¡å¼æ¥æ§åˆ¶ç¨‹åºæµã€‚  
```
let fruits = vec!["banana", "apple", "cocount", "orange", "strawberry"];
for &index in [0, 2, 99].iter() {
  match fruits.get(index) {
    Some(&"coconut") => println!("Coconuts are awesome!!!"),
    Some(fruit_name) => println!("It's a delicious {}!", fruit_name),
    None => println!("There is no fruit! :("),
  }
}
```
ä½¿ç”¨matchè¡¨è¾¾å¼æ³¨æ„è§„åˆ™ï¼š
- æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºå¯¹`match` armè¿›è¡Œè¯„ä¼°ã€‚å¿…é¡»åœ¨ä¸€èˆ¬äº‹ä¾‹ä¹‹å‰å®šä¹‰å…·ä½“äº‹ä¾‹ï¼Œå¦åˆ™å®ƒä»¬å°†æ— æ³•è¿›è¡ŒåŒ¹é…å’Œè¯„ä¼°ã€‚ 
- `match` armå¿…é¡»æ¶µç›–è¾“å…¥ç±»å‹å¯èƒ½å…·æœ‰çš„æ¯ä¸ªå¯èƒ½å€¼ã€‚å¦‚æœä½ å°è¯•æ ¹æ®éè¯¦å°½æ¨¡å¼åˆ—è¡¨è¿›è¡ŒåŒ¹é…ï¼Œåˆ™ä¼šå‡ºç°ç¼–è¯‘å™¨é”™è¯¯ã€‚

#### <a name='iflet'></a>if let è¡¨è¾¾å¼
```
let a_number = Option<u8> = Some(7);
if let Some(7) = a_number {
  println!("That's my lucky number!");
}
```

#### <a name='unwrapexpect'></a>ä½¿ç”¨`unwrap`å’Œ`expect`
`unwrap`æ–¹æ³•ç›´æ¥è®¿é—®`Option`ç±»å‹å†…éƒ¨å€¼ã€‚å¦‚æœå˜ä½“æ˜¯`None`ï¼Œåˆ™æ­¤æ–¹æ³•å°†ä¼španicã€‚  
`expect`ä½œç”¨ä¸`unwrap`ç›¸åŒï¼Œä½†å®ƒæä¾›ç”±ç¬¬äºŒä¸ªå‚æ•°æä¾›çš„è‡ªå®šä¹‰panicæ¶ˆæ¯  
è€ƒè™‘ä½¿ç”¨ä¸‹åˆ—æ–¹æ³•ä¹‹ä¸€ï¼š
- ä½¿ç”¨æ¨¡å¼åŒ¹é…æ˜¾å¼å¤„ç†`None`æ¡ˆä¾‹ã€‚
- è°ƒç”¨ç±»ä¼¼çš„épanicæ–¹æ³•ï¼Œä¾‹å¦‚`unwrap_or`ã€‚

#### <a name='Result'></a>ä½¿ç”¨ Result ç±»å‹å¤„ç†é”™è¯¯
```
#[derive(Debug)]
struct DivisionByZeroError;

fn safe_division(dividend: f64, divisor: f64) -> Result<f64, DivisionByZeroError> {
  if divisor == 0.0 {
    Err(DivisionByZeroError)
  } else {
    Ok(dividend / divisor)
  }
}

fn main() {
  println!("{:?}", safe_division(9.0, 3.0)); // Ok(3.0)
  println!("{:?}", safe_division(4.0, 0.0)); // Err(DivisionByZeroError)
  println!('{:?}', safe_division(0.0, 2.0)); // Ok(0.0)
}
```

### <a name='Rust-1'></a>Rustå¦‚ä½•ç®¡ç†å†…å­˜

#### <a name='-1'></a>ä»€ä¹ˆæ˜¯æ‰€æœ‰æƒ
**ä½œç”¨åŸŸç•Œå®šè§„åˆ™**  
Rustä¸­ï¼Œä½œç”¨åŸŸå¸¸å¸¸ç”±å¤§æ‹¬å·`{}`è¡¨ç¤ºã€å¸¸è§ä½œç”¨åŸŸåŒ…æ‹¬å‡½æ•°ä½“ã€`if` `else` `match`åˆ†æ”¯ã€‚  
**æ‰€æœ‰æƒå’Œåˆ é™¤**  
Rustç»™èŒƒå›´çš„æ¦‚å¿µå¢åŠ äº†ä¸€ä¸ªè½¬æŠ˜ã€‚å½“å¯¹è±¡è¶…å‡ºèŒƒå›´æ—¶ï¼Œä¾¿ä¼šå°†å…¶â€åˆ é™¤â€œã€‚åˆ é™¤å˜é‡ä¼šé‡Šæ”¾ä¸å…¶å…³è”çš„æ‰€æœ‰èµ„æºã€‚  
**ç§»åŠ¨è¯­ä¹‰**  
æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æŸä¸ªé¡¹çš„æ‰€æœ‰æƒä»ä¸€ä¸ªç»‘å®šè½¬ç§»åˆ°å¦ä¸€ä¸ªç»‘å®šã€‚Rustä¸­ï¼Œâ€è½¬ä¹‰æ‰€æœ‰æƒâ€œè¢«ç§°ä¸ºâ€ç§»åŠ¨â€œã€‚
```
let mascot = String::from("ferris");
let ferris = mascot;
```
`String`çš„æ‰€æœ‰æƒä»`mascot`è½¬ç§»åˆ°`ferris`ä¹‹åï¼Œå°†æ— æ³•å†ä½¿ç”¨`mascot`å˜é‡ã€‚  
**å‡½æ•°ä¸­çš„æ‰€æœ‰æƒ**  
å°†æŸä¸ªå†…å®¹ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œä¼šå°†è¯¥å†…å®¹ç§»åŠ¨åˆ°å‡½æ•°ä¸­ã€‚å…¶ä»–ç¼–ç¨‹è¯­è¨€å˜é‡çš„å€¼åœ¨ä¼ é€’ç»™æˆ‘ä»¬çš„å‡½æ•°ä¹‹å‰å¯ä»¥éšå¼å¤åˆ¶ã€‚ä½†åœ¨rustä¸­ï¼Œæ­¤æ“ä½œä¸ä¼šå‘ç”Ÿã€‚  
**å¤åˆ¶è€Œä¸æ˜¯è½¬ç§»**  
å¤åˆ¶æ•°å­—çš„æˆæœ¬ä½ï¼Œå› æ­¤å¤åˆ¶è¿™äº›å€¼æ˜¯æœ‰æ„ä¹‰çš„ã€‚å¤åˆ¶å­—ç¬¦ä¸²ã€å‘é‡æˆ–å…¶ä»–å¤æ‚ç±»å‹çš„æˆæœ¬å¯èƒ½é«˜æ˜‚ï¼Œå› æ­¤å®ƒä»¬æ²¡æœ‰å®ç°`Copy`ç‰¹å¾ï¼Œè€Œæ˜¯è¢«ç§»åŠ¨ã€‚  
æ˜¾å¼å¤åˆ¶
```
fn process(s: String) {}

fn main() {
  let s = String::from("Hello, world!");
  process(s.clone());
  process(s);
}
```

#### <a name='-1'></a>äº†è§£å€Ÿç”¨
é€šè¿‡å¼•ç”¨ï¼Œå¯ä»¥â€å€Ÿç”¨â€œä¸€äº›å€¼ï¼Œè€Œæ— éœ€æ‹¥æœ‰å®ƒä»¬ã€‚&  
**æ”¹å˜å€Ÿç”¨çš„å€¼**  
```
fn main() {
  let mut greeting = String::from("hello");
  change(&mut greeting);
}

fn change(text: &mut String) {
  text.push_str(", world");
}
```
**å€Ÿç”¨å’Œå¯å˜å¼•ç”¨**  
ä»£ç å¿…é¡»åŒæ—¶å®ç°ä»¥ä¸‹ä»»ä¸€å®šä¹‰ï¼Œä½†ä¸èƒ½åŒæ—¶å®ç°è¿™ä¸¤ä¸ªå®šä¹‰ï¼š  
- ä¸€ä¸ªæˆ–å¤šä¸ªä¸å¯å˜å¼•ç”¨(`&T`)
- æ°å¥½ä¸€ä¸ªå¯å˜å¼•ç”¨(`&mut T`)

#### <a name='-1'></a>ä½¿ç”¨ç”Ÿå­˜æœŸéªŒè¯å¼•ç”¨
å£°æ˜å‘¨æœŸä½¿Rustèƒ½å¤Ÿåœ¨ä¸äº§ç”Ÿåƒåœ¾æ”¶é›†æ€§èƒ½å¼€é”€çš„æƒ…å†µä¸‹ç¡®ä¿å†…å­˜å®‰å…¨ã€‚  
**åœ¨å‡½æ•°ä¸­æ³¨é‡Šç”Ÿå­˜æœŸ**  
å¤šä¸ªç”Ÿå­˜æœŸæ—¶ï¼Œç”Ÿå­˜æœŸæ‰¹æ³¨å¸®åŠ©ç¼–è¯‘å™¨äº†è§£å®ƒéœ€è¦ä½¿ç”¨å“ªä¸ªç”Ÿå­˜æœŸï¼Œä»¥ç¡®ä¿å¼•ç”¨åœ¨è¿è¡Œæ—¶æœ‰æ•ˆã€‚  
```
fn longest_word<'a>(x: &'a String, y: &'a String) -> &'a String {
  if x.len() > y.len() {
    x
  } else {
    y
  }
}
```
**åœ¨ç±»å‹ä¸­æ‰¹æ³¨ç”Ÿå­˜æœŸ**  
```
#[derive(Debug)]
struct Highlight<'document>(&'document str);
```
#### <a name='-1'></a>æ³›å‹æ•°æ®ç±»å‹
æ˜¯æ ¹æ®å…¶ä»–éƒ¨åˆ†æœªçŸ¥ç±»å‹å®šä¹‰çš„ç±»å‹ã€‚ä½¿ç”¨æ³›å‹ç±»å‹æ—¶ï¼Œå¯ä»¥æŒ‡å®šæ‰€éœ€æ“ä½œï¼Œè€Œä¸å¿…è€ƒè™‘å®šä¹‰ç±»å‹æŒæœ‰çš„å†…éƒ¨ç±»å‹ã€‚  
#### <a name='-1'></a>ä½¿ç”¨ç‰¹å¾å®šä¹‰å…±äº«è¡Œä¸º
ç‰¹å¾æ˜¯ä¸€ç»„ç±»å‹å¯å®ç°çš„é€šç”¨æ¥å£ã€‚  
```
trait Area {
  fn area(&self) -> f64;
}
struct Circle {
  radius: f64,
}
struct Rectangle {
  width: f64,
  height: f64,
}

impl Area for Circle {
  fn area(&self) -> f64 {
    use std::f64::consts::PI;
    PI * self.radius.powf(2.0)
  }
}
impl Area for Rectangle {
  fn area(&self) -> f64 {
    self.width * self.height
  }
}
```
#### <a name='-1'></a>ä½¿ç”¨æ´¾ç”Ÿç‰¹å¾
`Point`ç±»å‹æ²¡æœ‰å®ç°ä»¥ä¸‹ç‰¹å¾ï¼š
- `Debug`ç‰¹å¾ï¼Œå…è®¸ä½¿ç”¨`{:?}`æ ¼å¼è¯´æ˜ç¬¦æ¥è®¾ç½®ç±»å‹çš„æ ¼å¼ï¼Œåœ¨é¢å‘ç¨‹åºå‘˜çš„è°ƒè¯•ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚
- `Display`ç‰¹å¾ï¼Œå…è®¸ä½¿ç”¨`{}`æ ¼å¼è¯´æ˜ç¬¦æ¥è®¾ç½®ç±»å‹çš„æ ¼å¼ï¼Œä¸`Debug`ç±»ä¼¼ã€‚ä½†`Display`æ›´é€‚åˆé¢å‘ç”¨æˆ·çš„è¾“å‡ºã€‚  
- `PartialEq`ç‰¹å¾ï¼Œå…è®¸æ¯”è¾ƒå®ç°å™¨æ˜¯å¦ç›¸ç­‰ã€‚ 
Rustç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨`#[derive(Trait)]`å±æ€§è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®ç°`Debug`å’Œ`PartialEq`ç‰¹å¾
```
#[derive(Debug, PartialEq)]
struct Point {
  x: i32,
  y: i32,
}

use std::fmt;
impl fmt::Display for Point {
  fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
    write!(f, "({}, {})", self.x, self.y)
  }
}

fn main() {
  let p1 = Point { x: 1, y: 2 };
  let p2 = Point { x: 4, y: -3 };

  if p1 == p2 {
    println!("equal!");
  } else {
    println!("not equal!");
  }

  println!("{}", p1);
  println!("{?:}", p1);
}
```

#### <a name='-1'></a>ä½¿ç”¨ç‰¹å¾è¾¹ç•Œå’Œæ³›å‹å‡½æ•°
æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰å‡½æ•°çš„æ–¹å¼æ¥å—ä¸åŒç±»å‹çš„å‡½æ•°ï¼Œå› ä¸ºå½“ç±»å‹å®ç°ç‰¹å¾æ—¶ï¼Œå¯ä»¥å°†å…¶æŠ½è±¡çš„è§†ä¸ºè¯¥ç‰¹å¾ã€‚  
#### <a name='-1'></a>ä½¿ç”¨è¿­ä»£å™¨
Rustä¸­æ‰€æœ‰è¿­ä»£å™¨éƒ½ä¼šå®ç°åä¸º`Iterator`çš„ç‰¹å¾ï¼Œè¯¥ç‰¹å¾åœ¨æ ‡å‡†åº“ä¸­å®šä¹‰ï¼Œå¹¶ç”¨äºé€šè¿‡é›†åˆå®ç°è¿­ä»£å™¨ã€‚  
åˆ›å»ºè‡ªå·±çš„è¿­ä»£å™¨æ¶‰åŠä¸¤ä¸ªæ­¥éª¤ï¼š
1. åˆ›å»ºä¸€ä¸ªç»“æ„æ¥ä¿ç•™è¿­ä»£å™¨çš„çŠ¶æ€ã€‚
2. å®ç°è¯¥ç»“æ„çš„è¿­ä»£å™¨ã€‚

```
#[derive(Debug)]
struct Counter {
  length: usize,
  count: usize,
}

impl Counter {
  fn new(length: usize) -> Counter {
    Counter {
      count: 0,
      length,
    }
  }
}

impl Iterator for Counter {
  type Item = usize;

  fn next(&mut self) -> Option<Self::Item> {
    self.count += 1;
    if self.count <= self.length {
      Some(self.count)
    } else {
      None
    }
  }
}

fn main() {
  for number in Counter::new(10) {
    println!("{}", number);
  }
}
```
### <a name='-1'></a>æ¢ç´¢æ¨¡å—ã€åŒ…å’Œç¬¬ä¸‰æ–¹ç®±
#### <a name='-1'></a>ç†è§£ä»£ç ç»„ç»‡èƒŒåçš„æ¦‚å¿µ
* åŒ…
  * åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªcrateå†…çš„åŠŸèƒ½
  * åŒ…æ‹¬æœ‰å…³å¦‚ä½•ç”Ÿæˆè¿™äº›crateçš„ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯ä½äº`Cargo.toml`æ–‡ä»¶ä¸­ã€‚
* ç®±
  * æ˜¯ç¼–è¯‘å•å…ƒï¼Œå³Rustç¼–è¯‘å™¨å¯ä»¥è¿è¡Œçš„æœ€å°ä»£ç é‡ã€‚
  * ç¼–è¯‘å®Œæˆåï¼Œç³»ç»Ÿå°†ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æˆ–åº“æ–‡ä»¶ã€‚
  * å…¶ä¸­åŒ…å«æœªå‘½åçš„éšå¼é¡¶å±‚æ¨¡å—ã€‚
* æ¨¡å—
  * æ˜¯ç®±å†…çš„ä»£ç ç»„ç»‡å•ä½(æˆ–ä¸ºåµŒå¥—å½¢å¼)ã€‚
  * å¯ä»¥å…·æœ‰è·¨å…¶ä»–æ¨¡å—çš„é€’å½’å®šä¹‰ã€‚

å¦‚æœåŒ…ä¸­åŒ…å«`src/main.rs`å’Œ`src/lib.rs`ï¼Œåˆ™å…¶ä¸­æœ‰ä¸¤ä¸ªç®±ï¼šåº“æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ã€‚å®ƒä»¬çš„åç§°ä¸åŒ…ç›¸åŒã€‚  
æ¨¡å—æ˜¯é¡¹çš„é›†åˆï¼š
- å¸¸é‡
- ç±»å‹åˆ«å
- å‡½æ•°
- ç»“æ„
- æšä¸¾
- Traits
- `impl`å—
- å…¶ä»–æ¨¡å—

å¦‚æœæºæ–‡ä»¶ä¸­å­˜åœ¨`mod`å£°æ˜ï¼Œåˆ™åœ¨è¿è¡Œç¼–è¯‘å™¨ä¹‹å‰ï¼Œç³»ç»Ÿä¼šå°†æ¨¡å—æ–‡ä»¶çš„å†…å®¹æ’å…¥åˆ°`mod`å£°æ˜åœ¨æºæ–‡ä»¶ä¸­çš„æ‰€åœ¨ä½ç½®ã€‚ç³»ç»Ÿä¸ä¼šå¯¹æ¨¡å—è¿›è¡Œå•ç‹¬ç¼–è¯‘ï¼Œåªä¼šç¼–è¯‘ç®±ã€‚  

#### <a name='-1'></a>å‘é¡¹ç›®ä¸­æ·»åŠ ç¬¬ä¸‰æ–¹ç®±


